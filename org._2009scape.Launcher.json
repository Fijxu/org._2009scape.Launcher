{
    "id": "org._2009scape.Launcher",
    "runtime": "org.freedesktop.Platform",
    "runtime-version": "22.08",
    "sdk": "org.freedesktop.Sdk",
    "command": "2009scape-launcher",
    "separate-locales": false,
    "sdk-extensions": [
        "org.freedesktop.Sdk.Extension.openjdk11",
        "org.freedesktop.Sdk.Extension.dotnet6"
    ],
    "build-options": {
        "append-path": "/usr/lib/sdk/dotnet6/bin",
        "append-ld-library-path": "/usr/lib/sdk/dotnet6/lib",
        "env": {
            "PKG_CONFIG_PATH": "/app/lib/pkgconfig:/app/share/pkgconfig:/usr/lib/pkgconfig:/usr/share/pkgconfig:/usr/lib/sdk/dotnet6/lib/pkgconfig"
        }
    },
    "finish-args": [
        "--share=network",
        "--socket=x11",
        "--share=ipc",
        "--device=dri",
        "--socket=pulseaudio",
        "--filesystem=xdg-data/2009scape",
        "--env=PATH=/usr/bin:/app/bin:/app/jre/bin"
    ],
    "modules": [
        {
            "name": "openjdk",
            "buildsystem": "simple",
            "build-commands" : [ "/usr/lib/sdk/openjdk11/install.sh" ]
        },
        {
            "name": "2009scape",
            "buildsystem": "simple",
            "build-options": {
                "arch": {
                    "aarch64": {
                        "env" : {
                            "RUNTIME": "linux-arm64"
                        }
                    },
                    "x86_64": {
                        "env" : {
                            "RUNTIME": "linux-x64"
                        }
                    }
                }
            },
            "build-commands": [
                "install-sdk.sh",
                "cd Saradomin",
                "dotnet publish --runtime ${RUNTIME} -c Release --source nuget-sources",
            
                "install -D bin/Release/net6.0/${RUNTIME}/Saradomin /app/bin/2009scape-launcher",
                "install -Dm644 Saradomin/Resources/Icons/saradomin.svg /app/share/icons/hicolor/scalable/apps/org._2009scape.Launcher.svg",
                "install -Dm644 Saradomin/Resources/Linux/org._2009scape.Launcher.desktop /app/share/applications/org._2009scape.Launcher.desktop",
                "install -Dm644 Saradomin/Resources/Linux/org._2009scape.Launcher.appdata.xml /app/share/metainfo/org._2009scape.Launcher.appdata.xml"
            ],
            "sources": [
                {
                    "type": "script",
                    "dest-filename": "2009scape-launcher",
                    "commands": [
                          "exec 2009scape-launcher \"$@\""
                    ]
                },
                {
                    "type": "git",
                    "url": "https://gitlab.com/2009scape/Saradomin-Launcher.git",
                    "commit": "413b62c4b0a5fdc81d7b3a680fc7296d695e0d82"
                },


                "saradomin-x64-sources.json",
                "saradomin-arm64-sources.json",

                {
                    "type": "file",
                    "url": "https://api.nuget.org/v3-flatcontainer/microsoft.aspnetcore.app.runtime.linux-arm/7.0.0/microsoft.aspnetcore.app.runtime.linux-arm.7.0.0.nupkg",
                    "sha512": "fe68af4fac5062db9b9be6a298a577f3a1cc70e218d05d1e98ea47fa2536e10977033d38c995daf90da2035bbe275c2e2c163ff639ee7adfaf094fd166a39933",
                    "dest": "nuget-sources",
                    "dest-filename": "microsoft.aspnetcore.app.runtime.linux-arm.7.0.0.nupkg"
                },
                {
                    "type": "file",
                    "url": "https://api.nuget.org/v3-flatcontainer/microsoft.aspnetcore.app.runtime.linux-arm64/7.0.0/microsoft.aspnetcore.app.runtime.linux-arm64.7.0.0.nupkg",
                    "sha512": "1c3ea618c23823c54f6fa82799b8743c4e919e1fa1196d18402e547faaafb52a4d6e2131ddef6092dc71a308e8f7bcd3feac825565cec112705dacf88b1f7e57",
                    "dest": "nuget-sources",
                    "dest-filename": "microsoft.aspnetcore.app.runtime.linux-arm64.7.0.0.nupkg"
                },
                {
                    "type": "file",
                    "url": "https://api.nuget.org/v3-flatcontainer/microsoft.aspnetcore.app.runtime.linux-x64/7.0.0/microsoft.aspnetcore.app.runtime.linux-x64.7.0.0.nupkg",
                    "sha512": "285817dc47116766e8f3279c0c6b7add76e1c362ed455b7d03790874bb4fab70f0507a31747a109a8afa3b80215b9c463a3d245e80ba14ee896114ef44f8892d",
                    "dest": "nuget-sources",
                    "dest-filename": "microsoft.aspnetcore.app.runtime.linux-x64.7.0.0.nupkg"
                },
                {
                    "type": "file",
                    "url": "https://api.nuget.org/v3-flatcontainer/microsoft.netcore.app.runtime.linux-arm/7.0.0/microsoft.netcore.app.runtime.linux-arm.7.0.0.nupkg",
                    "sha512": "7860233cc8030f239a9a8fe3c5963cd19efc4b8fe25527230e84491b1c7b5d2ddfa6ad85f494c711f50a84bc1b4d9c6a6196ffce8df757b6487e592fa00640c2",
                    "dest": "nuget-sources",
                    "dest-filename": "microsoft.netcore.app.runtime.linux-arm.7.0.0.nupkg"
                },
                {
                    "type": "file",
                    "url": "https://api.nuget.org/v3-flatcontainer/microsoft.netcore.app.runtime.linux-arm64/7.0.0/microsoft.netcore.app.runtime.linux-arm64.7.0.0.nupkg",
                    "sha512": "b0970c968b230486964549a6665d90c69c8e38f44471f02d83ecf2bba1e76c162bd383abffbf2779b515413486ceba0507d234f41b690d961a5975c41ce6f437",
                    "dest": "nuget-sources",
                    "dest-filename": "microsoft.netcore.app.runtime.linux-arm64.7.0.0.nupkg"
                },
                {
                    "type": "file",
                    "url": "https://api.nuget.org/v3-flatcontainer/microsoft.netcore.app.runtime.linux-x64/7.0.0/microsoft.netcore.app.runtime.linux-x64.7.0.0.nupkg",
                    "sha512": "0d2c0cd4a669b753abebb2edaf65b9fd277836b029d6f945bc95f98ed487221b462f9a82dc199dd08c5b12f1f15134531e208fcad5931c426f9fdba6ab068786",
                    "dest": "nuget-sources",
                    "dest-filename": "microsoft.netcore.app.runtime.linux-x64.7.0.0.nupkg"
                }
            ]
        }
    ]
}
